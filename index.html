<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hello!</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="flipper.css">
        <script src="ga-tracking.js" type="text/javascript"></script>
        <script type="text/javascript">
            function trackCardFlip(card) {
                var eventAction = hasClass(card, 'is-active') ? 'flipToBack' : 'flipToFront';
                ga('send', 'event', 'Business Card', eventAction);
            }

            function hasClass(element, className) {
                return element.className.indexOf(className) !== -1;
            }

            function addClass(element, className) {
                element.className += ' ' + className;
            }

            function removeClass(element, className) {
                element.className = element.className
                    .split(' ')
                    .filter(function(cn) { return cn !== className; })
                    .join(' ');
            }

            function toggleClass(element, className) {
                if (hasClass(element, className)) {
                    console.log('removing class');
                    removeClass(element, className);
                } else {
                    console.log('adding class');
                    addClass(element, className);
                }
            }

            window.onload = function() {
                var card = document.getElementById('flipper');

                // Prepare sound file
                var CARD_SOUND_DELAY_MS = 250; // Wait for scaling, play sound on flipping
                var cardSound = new Audio('cardflip.mp3');

                var isFirstClick = true;

                // On the first click, just enable is-active
                card.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A') {
                        return; // Don't flip the card on link click
                    }

                    setTimeout(cardSound.play.bind(cardSound), CARD_SOUND_DELAY_MS);

                    if (isFirstClick) {
                        addClass(card, 'is-active');
                        isFirstClick = false;
                    } else {
                        toggleClass(card, 'is-active');
                        toggleClass(card, 'is-inactive');
                    }
                    trackCardFlip(card);
                });
            };
        </script>
    </head>

    <body>
        <div class="aligner">
            <div class="flip-container">
                <div id="flipper" class="flipper rollIn">
                    <div class="business-card front">
                        <div class="business-card--text">
                            <div class="business-card--name">Karen Liu</div>
                            <div class="business-card--title">Pro Snack Eater</div>
                            <div class="business-card--subtitle-link">More&#8230;</div>
                        </div>
                    </div>
                    <div class="business-card back">
                        <p>
                            Hi! I'm a software engineer who develops for companies like
                            Google, Square, and Patreon &mdash;
                            find my <a href="resume/index.html">resume here</a>.
                        </p>

                        <p>
                            More about me:
                            I love to
                            <a href="https://www.instagram.com/scarletpulsar">climb curtains</a> and
                            <a href="https://www.youtube.com/watch?v=RotOcNAmT5U">fling fireballs</a>;
                            I'm an aspiring minimalist; dessert is my greatest weakness ðŸ˜µ
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
